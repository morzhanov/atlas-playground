apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: redis-add-key
spec:
  templates:
    - name: redis-add-key
      script:
        image: goodsmileduck/redis-cli
        command: [bash]
        source: |
          redis-cli -h localhost -p 6379 SET {{inputs.parameters.key}} "{{inputs.parameters.value}}"
      inputs:
        parameters:
          - name: key
            value: key
          - name: value
            value: value
          - name: host
            value: redisserver.greenops.svc.cluster.local
          - name: port
            value: 6379
