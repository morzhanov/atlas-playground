apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: normal-
spec:
  entrypoint: entry
  templates:
    - name: entry
      dag:
        tasks:
          - name: deploy-to-dev
            templateRef:
              name: argocd-step
              template: argocd-sync-and-wait
            arguments:
              parameters:
                - name: argocd-version
                  value: "{{workflow.parameters.deploy-to-dev-argocd-version}}"
                - name: application-name
                  value: "{{workflow.parameters.deploy-to-dev-application-name}}"
                - name: revision
                  value: "{{workflow.parameters.deploy-to-dev-revision}}"
                - name: flags
                  value: "{{workflow.parameters.deploy-to-dev-flags}}"
                - name: argocd-server-address
                  value: "{{workflow.parameters.deploy-to-dev-argocd-server-address}}"
